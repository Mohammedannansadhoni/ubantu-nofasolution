<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registration Page Builder</title>

  <!-- Libs -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

  <style>
    :root{
      --brand:#0a3b7d;
      --ink:#1f2937;
      --ink-2:#374151;
      --muted:#6b7280;
      --line:#e5e7eb;
      --bg-grad-1:#e3eaf6;
      --bg-grad-2:#cfd8e6;
      --card:#ffffff;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:"Segoe UI", Arial, sans-serif; background:#f5f7fa;
      color:var(--ink);
    }

    /* Layout */
    .builder{display:flex; min-height:100vh;}
    .panel{width:340px; background:#fff; box-shadow:2px 0 12px rgba(0,0,0,.06); padding:20px; overflow:auto}
    .panel h3{margin:0 0 6px; color:var(--ink)}
    .panel p.small{margin:0 0 16px; color:var(--muted); font-size:12px}
    .sec{padding:14px 0; border-top:1px solid var(--line)}
    .sec:first-of-type{border-top:0}
    .sec h4{margin:0 0 10px; font-weight:700; font-size:12px; letter-spacing:.06em; text-transform:uppercase; color:var(--ink-2)}

    .btn{display:block; width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:8px; background:#f9fafb; text-align:left; cursor:pointer; margin-bottom:8px}
    .btn:hover{border-color:var(--brand)}
    .btn.primary{background:var(--brand); color:#fff; border-color:var(--brand)}
    .row{display:flex; gap:10px}
    .row .btn{flex:1}
    .input, .select{width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:8px; margin-bottom:8px; font-size:14px}
    .label{font-size:12px; color:var(--muted); margin:8px 0 4px}

    /* Canvas */
    .stage{flex:1; display:flex; align-items:center; justify-content:center; padding:24px; background:linear-gradient(135deg, var(--bg-grad-1) 0%, var(--bg-grad-2) 100%)}
    .page{width:100%; max-width:820px; min-height:560px; background:transparent}

    /* Card */
    .card{width:560px; max-width:95vw; margin:0 auto; background:var(--card); border-radius:18px; box-shadow:0 12px 40px rgba(0,0,0,.08); overflow:hidden}

    /* Header / Body / Footer placement */
    .page-header{display:none; padding:22px 26px 18px; text-align:center; border-bottom:2px solid var(--line)}
    .page-header img{max-width:90px; margin:0 auto 10px; display:block}
    .page-header h1{margin:0; font-size:22px; color:var(--ink)}
    .page-header p{margin:4px 0 0; color:#2563eb; font-weight:600}

    .page-body{padding:26px}

    .page-footer{display:none; padding:16px 26px; border-top:2px solid var(--line); text-align:center; color:var(--muted); font-size:13px}

    /* Form */
    .form{max-width:520px; margin:0 auto}
    .field{margin-bottom:14px}
    .field label{display:block; font-size:13px; color:var(--ink-2); margin-bottom:6px}
    .field input,.field select{width:100%; padding:12px 12px; border:1px solid var(--line); border-radius:8px; background:#f9fafb; font-size:14px}
    .required{color:#e11d48; margin-left:3px}
    .register{width:100%; padding:13px 14px; background:var(--brand); color:#fff; border:0; border-radius:10px; font-weight:700; cursor:pointer; margin-top:4px}
    .register:hover{filter:brightness(.95)}
    .hint{margin-top:8px; text-align:center; color:var(--muted); font-size:12px}

    /* Sortable visual */
    #fields.sortable-active .field{outline:1px dashed #cbd5e1}

    /* Alignment of the card on the page */
    .align-left .card{margin-left:0}
    .align-right .card{margin-left:auto}
    .align-center .card{margin-left:auto; margin-right:auto}
  </style>
</head>
<body>
<div class="builder">

  <!-- TOOLKIT / MAIN PAGE CONTROLS -->
  <aside class="panel" id="toolkit">
    <h3>Registration Builder</h3>
    <p class="small">Main page → add Header / Footer; Body contains the registration form you design below.</p>

    <!-- Main page sections -->
    <div class="sec" id="page-sections">
      <h4>Main Page Sections</h4>
      <div class="row">
        <button class="btn" id="add-header"><i class="fa fa-plus"></i> Add Header</button>
        <button class="btn" id="remove-header"><i class="fa fa-trash"></i> Remove Header</button>
      </div>
      <div class="row">
        <button class="btn" id="add-footer"><i class="fa fa-plus"></i> Add Footer</button>
        <button class="btn" id="remove-footer"><i class="fa fa-trash"></i> Remove Footer</button>
      </div>
      <label class="label">Alignment</label>
      <div class="row">
        <button class="btn" data-align="left">Left</button>
        <button class="btn" data-align="center">Center</button>
        <button class="btn" data-align="right">Right</button>
      </div>
      <label class="label">Header Title</label>
      <input id="hdr-title" class="input" value="Abu Dhabi Procurement Excellence Forum" />
      <label class="label">Header Subtitle</label>
      <input id="hdr-sub" class="input" value="Event Registration" />
      <label class="label">Header Logo</label>
      <input id="logo" type="file" class="input" accept="image/*" />
      <label class="label">Footer Note</label>
      <input id="ftr-note" class="input" value="Please provide the correct email address to receive your confirmation email." />
      <button class="btn" id="apply-sections">Apply Header/Footer Content</button>
    </div>

    <!-- Registration form controls (live inside Body) -->
    <div class="sec">
      <h4>Registration Form — Quick Add</h4>
      <div class="row">
        <button class="btn" data-add="first">First Name *</button>
        <button class="btn" data-add="last">Last Name *</button>
      </div>
      <div class="row">
        <button class="btn" data-add="entity">Entity *</button>
        <button class="btn" data-add="job">Job Title</button>
      </div>
      <div class="row">
        <button class="btn" data-add="mobile">Mobile *</button>
        <button class="btn" data-add="email">Email *</button>
      </div>
    </div>

    <div class="sec">
      <h4>Custom Fields</h4>
      <select id="custom-type" class="select">
        <option value="text">Text</option>
        <option value="email">Email</option>
        <option value="date">Date</option>
        <option value="select">Dropdown</option>
      </select>
      <input id="custom-label" class="input" placeholder="Label (e.g., Company)" />
      <input id="custom-ph" class="input" placeholder="Placeholder (e.g., Enter company)" />
      <label class="row" style="align-items:center; gap:8px; margin:6px 0 10px">
        <input id="custom-req" type="checkbox" /> <span class="label" style="margin:0">Required</span>
      </label>
      <button class="btn" id="add-custom"><i class="fa fa-plus"></i> Add Custom Field</button>
    </div>

    <div class="sec">
      <h4>Form Utilities</h4>
      <button class="btn" id="enable-sort">Enable Reorder (Drag)</button>
      <button class="btn" id="disable-sort">Disable Reorder</button>
      <button class="btn" id="clear-form"><i class="fa fa-eraser"></i> Clear All Fields</button>
    </div>

    <div class="sec">
      <h4>Preview & Export</h4>
      <button class="btn primary" id="preview">Preview</button>
      <button class="btn primary" id="export">Export Standalone HTML</button>
    </div>
  </aside>

  <!-- PAGE / CANVAS -->
  <main class="stage">
    <div id="page" class="page align-center">
      <div class="card">
        <header id="page-header" class="page-header">
          <img id="logo-img" src="" alt="Logo" style="display:none" />
          <h1 id="hdr-title-text">Abu Dhabi Procurement Excellence Forum</h1>
          <p id="hdr-sub-text">Event Registration</p>
        </header>

        <section class="page-body">
          <form class="form" id="reg-form" onsubmit="return false;">
            <div id="fields">
              <!-- default fields to match screenshot -->
              <div class="field" data-type="text">
                <label>FIRST NAME<span class="required">*</span></label>
                <input type="text" placeholder="Enter your first name" required />
              </div>
              <div class="field" data-type="text">
                <label>LAST NAME<span class="required">*</span></label>
                <input type="text" placeholder="Enter your last name" required />
              </div>
              <div class="field" data-type="text">
                <label>ENTITY<span class="required">*</span></label>
                <input type="text" placeholder="Enter your entity name" required />
              </div>
              <div class="field" data-type="text">
                <label>JOB TITLE</label>
                <input type="text" placeholder="Enter your job title" />
              </div>
              <div class="field" data-type="mobile">
                <label>MOBILE NUMBER</label>
                <div class="row" style="gap:8px">
                  <select class="select" style="max-width:110px">
                    <option selected>+971</option>
                    <option>+91</option>
                    <option>+966</option>
                  </select>
                  <input type="tel" class="input" placeholder="Enter your mobile number"/>
                </div>
              </div>
              <div class="field" data-type="email">
                <label>EMAIL<span class="required">*</span></label>
                <input type="email" placeholder="Enter your email address" required />
              </div>
            </div>
            <button class="register" type="button">REGISTER</button>
            <p class="hint" id="hint">Please provide the correct email address to receive your confirmation email.</p>
          </form>
        </section>

        <footer id="page-footer" class="page-footer">
          Please provide the correct email address to receive your confirmation email.
        </footer>
      </div>
    </div>
  </main>
</div>

<script>
(function(){
  const $page = $("#page");
  const $header = $("#page-header");
  const $footer = $("#page-footer");
  const $fields = $("#fields");

  // Alignment
  $("[data-align]").on("click", function(){
    const a = $(this).data("align");
    $page.removeClass("align-left align-center align-right").addClass("align-"+a);
  });

  // Show/hide sections
  $("#add-header").on("click", ()=> $header.show());
  $("#remove-header").on("click", ()=> $header.hide());
  $("#add-footer").on("click", ()=> $footer.show());
  $("#remove-footer").on("click", ()=> $footer.hide());

  // Apply header/footer content
  $("#apply-sections").on("click", function(){
    $("#hdr-title-text").text($("#hdr-title").val().trim() || "");
    $("#hdr-sub-text").text($("#hdr-sub").val().trim() || "");
    $("#page-footer").text($("#ftr-note").val().trim() || "");
    if($("#hdr-title").val() || $("#hdr-sub").val() || $("#logo")[0].files.length){ $header.show(); }
    if($("#ftr-note").val()){ $footer.show(); }
  });

  // Logo upload
  $("#logo").on("change", function(e){
    const f = e.target.files && e.target.files[0];
    if(!f) return;
    const reader = new FileReader();
    reader.onload = evt => { $("#logo-img").attr("src", evt.target.result).show() };
    reader.readAsDataURL(f);
  });

  // Enable/Disable sortable
  $("#enable-sort").on("click", function(){
    $fields.addClass("sortable-active").sortable({placeholder:"field-placeholder"});
  });
  $("#disable-sort").on("click", function(){
    try{ $fields.removeClass("sortable-active").sortable("destroy"); }catch(e){}
  });

  // Clear form fields
  $("#clear-form").on("click", function(){ $fields.empty(); });

  // Quick add buttons
  $("[data-add]").on("click", function(){
    const type = $(this).data("add");
    addPresetField(type);
  });

  function addPresetField(type){
    const el = {
      first: tplText("FIRST NAME", "Enter your first name", true),
      last: tplText("LAST NAME", "Enter your last name", true),
      entity: tplText("ENTITY", "Enter your entity name", true),
      job: tplText("JOB TITLE", "Enter your job title", false),
      email: tplEmail("EMAIL", "Enter your email address", true),
      mobile: tplMobile("MOBILE NUMBER")
    }[type];
    if(el) $fields.append(el);
  }

  // Custom field add
  $("#add-custom").on("click", function(){
    const t = $("#custom-type").val();
    const lab = ($("#custom-label").val()||"Custom").trim();
    const ph = ($("#custom-ph").val()||"").trim();
    const req = $("#custom-req").prop("checked");

    let node = null;
    if(t === "text") node = tplText(lab, ph, req);
    if(t === "email") node = tplEmail(lab, ph, req);
    if(t === "date") node = tplDate(lab, req);
    if(t === "select") node = tplSelect(lab, ["Option A","Option B"], req);
    if(node) $fields.append(node);
  });

  // Templates
  function tplWrap(labelHtml, inner){
    return $(
      `<div class="field">\n        <label>${labelHtml}</label>\n        ${inner}\n        <div class="row" style="margin-top:6px">\n          <button type="button" class="btn" onclick="this.closest('.field').remove()"><i class='fa fa-trash'></i> Remove</button>\n        </div>\n      </div>`
    );
  }
  function reqStar(req){ return req ? '<span class="required">*</span>' : '' }

  function tplText(label, ph, req){
    return tplWrap(`${escapeHtml(label)}${reqStar(req)}`, `<input type="text" placeholder="${escapeHtml(ph)}" ${req?"required":""}>`);
  }
  function tplEmail(label, ph, req){
    return tplWrap(`${escapeHtml(label)}${reqStar(req)}`, `<input type="email" placeholder="${escapeHtml(ph)}" ${req?"required":""}>`);
  }
  function tplDate(label, req){
    return tplWrap(`${escapeHtml(label)}${reqStar(req)}`, `<input type="date" ${req?"required":""}>`);
  }
  function tplSelect(label, opts, req){
    const options = opts.map(o=>`<option>${escapeHtml(o)}</option>`).join('');
    return tplWrap(`${escapeHtml(label)}${reqStar(req)}`, `<select ${req?"required":""}>${options}</select>`);
  }
  function tplMobile(label){
    const inner = `
      <div class="row" style="gap:8px">
        <select class="select" style="max-width:110px">
          <option selected>+971</option><option>+91</option><option>+966</option>
        </select>
        <input type="tel" class="input" placeholder="Enter your mobile number">
      </div>`;
    return tplWrap(escapeHtml(label), inner);
  }

  // Preview
  $("#preview").on("click", function(){
    const html = buildStandalone();
    const w = window.open("", "_blank");
    w.document.write(html);
  });

  // Export
  $("#export").on("click", function(){
    const html = buildStandalone();
    const blob = new Blob([html], {type:'text/html'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'registration_page.html';
    a.click();
  });

  function buildStandalone(){
    // Clone only the page markup (card with header/body/footer)
    const pageMarkup = document.querySelector('#page').outerHTML;
    // Inline styles (copy from <style> tag above)
    const styles = Array.from(document.querySelectorAll('style')).map(s=>s.innerHTML).join('\n');
    return `<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<title>Registration Page</title>\n<style>${styles}</style>\n</head>\n<body>\n<div class="stage">${pageMarkup}</div>\n</body>\n</html>`;
  }

  function escapeHtml(s){ return String(s||"").replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])) }
})();
</script>
</body>
</html>
